<!DOCTYPE html>
<html lang="en">

<head>

    

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js"></script>
    <script>
        $(function () {
            $("#header").load("header.html");
            $("#footer").load("footer.html");
        });

    </script>

    <title>Document</title>
</head>

<body>
    <div id="header"></div>
    <br>
    <div id="body-content">
        <!--min egen body content starter her-->

        <div id="booking-timetable" class="container">
            <div class="h1 text-center">Book en Fremvisning</div>
            <div class="h4 text-center">Uge - 4 (18-11-2022 til 25-11-2022)</div>
            <p id="booking-confirm-div">
              Please select a time from below list and click on Book to make the booking
              Date: <span id="date-div"></span>
              Time: <span id="time-div"></span>
              <span id="booking-confirm-button"></span>

            </p>
            <div  class="table-responsive-md">
                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">Dag og Dato</th>
                        <th scope="col">Dag og Dato</th>
                        <th scope="col">Dag og Dato</th>
                        <th scope="col">Dag og Dato</th>
                        <th scope="col">Dag og Dato</th>
                        <th scope="col">Dag og Dato</th>
                        <th scope="col">Dag og Dato</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                            <ul class="list-group w-100">    
                            </ul>
                        </td>
                        <td>
                            <ul class="list-group w-100">
                            </ul>
                        </td>
                        <td>
                            <ul class="list-group w-100">
                            </ul>
                        </td>
                        <td>
                            <ul class="list-group w-100">
                            </ul>
                        </td>
                        <td>
                            <ul class="list-group w-100">
                                <li class="list-group-item"><input class="btn btn-primary" type="button" value="08.00-08-15" onclick="makeBooking(this.value, '10-10-2021')"></li>
                                <li class="list-group-item"><input class="btn btn-primary" type="button" value="08.16-08-30" onclick="makeBooking(this.value,  '11-10-2021')"></li>
                                <li class="list-group-item"><input class="btn btn-primary" type="button" value="08.00-08-15"></li>
                                <li class="list-group-item"><input class="btn btn-primary" type="button" value="08.00-08-15"></li>
                                <li class="list-group-item"><input class="btn btn-primary" type="button" value="08.00-08-15"></li>

                              </ul>
                        </td>
                        <td>
                            <ul class="list-group w-100">                          
                            </ul>
                        </td>
                        <td>
                            <ul class="list-group w-100">
                            </ul>
                        </td>
                      </tr>
                    </tbody>
                  </table>
            </div>
            <p>
              <label for="week-selection">Uge No: </label>
              <select id="week-selection">
              </select>
            </p>
        </div>


        <!--min egen body content slutter her-->
    </div>
    <div id="footer"></div>

    <script>
      
      window.onload = makeWeekSelectionDiv()

      /*
      * make the week selection div
      */
      function makeWeekSelectionDiv(){

        weekNumber = getCurrentWeekNumber() // first get the current week number

        let options =`
        <option value="${weekNumber}">Week ${weekNumber} </option>
        <option value="${weekNumber+1}">Week ${weekNumber+1}</option>
        <option value="${weekNumber+2}">Week ${weekNumber+2}</option>
        <option value="${weekNumber+3}">Week ${weekNumber+3}</option>
        `
        $('#week-selection').append(options)
      }



      $(function() {
        $('#week-selection').on('change', function(event) {
          var selectedWeek = $(this).val();
          console.log(selectedWeek);

        });
      });
    

      const makeBookingInformationPage = async () =>{
        var today = new Date();
        startDate = new Date(currentDate.getFullYear(), 0, 1);
        // var day = today.toLocaleDateString('en-US', {weekday: 'long'})
        
        // var dd = String(today.getDate()).padStart(2, '0');
        // var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
        // var yyyy = today.getFullYear();

       
        // const response = await fetch('http://localhost:8080/api/v1/shift/get-by-date', {
        //     method: 'POST',
        //     headers: { 'Content-Type': 'application/json' },
        //     body: JSON.stringify(Object.fromEntries(formData))
        //     //body: (today)
        // });
      }

    const propertyId = 123;

    function makeBooking(value, date){
      const bookingConfirmButton = document.getElementById('booking-confirm-button');
      const dateDiv = document.getElementById('date-div');
      const timeDiv = document.getElementById('time-div');
      const propertyDiv = ``

     
      dateDiv.innerHTML = `${date}`
      timeDiv.innerText = `${value}`
      bookingConfirmButton.innerHTML = `<a href="/booking-information.html?date=${date}&time=${value}&propertyId=${propertyId}"><input type="submit" value="Bestil Tid"/></a>`;
    }


    
      /*
      function to get the current week number
      */
      function getCurrentWeekNumber(){
        var today = new Date();
        yearStartDate = new Date(today.getFullYear(), 0, 1);
        var days = Math.floor((today - yearStartDate) / (24 * 60 * 60 * 1000));          
        var weekNumber = Math.ceil(days / 7);
        return weekNumber;
      }
    </script>
</body>

</html>
